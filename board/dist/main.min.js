!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=document;let i={};function s(e,t){i[e]=t}function r(e){return i[e]}function d(e,t,n){let i,s,r=e;"string"==typeof r?(i=o.createElement(r),r={attrs:{},node:i}):i=r.node,s=Object.keys(t);for(let e=0,n=s.length;e<n;e++)r.attrs[s[e]]&&r.attrs[s[e]]===t[s[e]]||(r.attrs[s[e]]=t[s[e]],i.setAttribute(s[e],t[s[e]]));return void 0!==n&&(i.textContent=n),r}class a{_setDefaultConfig(){this._config={frameDrawn:!1,requestedAnimationFrame:!1,postDrawFn:[]},this._components={}}configure(e){let t=this._config;this._config={...t,...e}}getConfig(e){return this._config[e]}getNode(){return this._components["root-wraper"]&&this._components["root-wraper"].node}getIdx(){return this._config.idx}setIdx(e){this._config.idx=e}setParentComponent(e){this._parentComponent=e}getParentComponent(){return this._parentComponent}_requestDraw(){this._config.requestedAnimationFrame||requestAnimationFrame(()=>{this._draw(),this._config.requestedAnimationFrame=!0})}_drawFrame(){}_draw(){this._config.frameDrawn||this._drawFrame(),this._config.requestedAnimationFrame=!1}onDrawComplete(e){this._config.postDrawFn.push(e)}_fireDrawComplete(){for(let e=0,t=this._config.postDrawFn.length;e<t;e++)this._config.postDrawFn[e]()}dispose(){this._components["root-wraper"]&&(this._components["root-wraper"].node.parentNode.removeChild(this._components["root-wraper"].node),this._disposed=!0,this._components={},this._config={})}}class l extends a{constructor(e){super(),this._setDefaultConfig(),e&&this.configure(e),this._requestDraw()}_drawFrame(){let e=d("div",{class:"item-wraper",draggable:"true"}),t=d("div",{class:"item"}),n=d("div",{class:"item-text"},this._config.text),o=d("a",{class:"btn right btn-edit",href:"#!"}),i=d("img",{class:"ico-edit",src:"assets/pencil.png",width:"10px",height:"10px"});e.node.addEventListener("dragstart",e=>{e.dataTransfer.setData("currentIdx",this.getIdx()),e.dataTransfer.setData("currentParentIdx",this.getParentComponent().getIdx())}),o.node.addEventListener("click",(function(){var e,t,o;d(n,{contenteditable:"true"}),e=n.node,document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(o=window.getSelection()).removeAllRanges(),o.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())})),n.node.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),""!==n.node.textContent?(this._config.text=n.node.textContent,d(n,{contenteditable:"false"},this._config.text)):this.dispose())}),o.node.appendChild(i.node),t.node.appendChild(n.node),t.node.appendChild(o.node),e.node.appendChild(t.node),this._components["root-wraper"]=e,this._components.root=t,this._components["item-text"]=n}_draw(){super._draw(),this._components["item-text"].node.textContent=this._config.text,this._fireDrawComplete()}serialize(){return{text:this._config.text}}}class c extends a{constructor(e,t,n){super(),this._setDefaultConfig(e,t),n&&this.configure(n),this._requestDraw()}_setDefaultConfig(e,t){super._setDefaultConfig(),this._config.parent=e,this._config.beforeElem=t,this._config.title="Enter title here",this._listItems=[]}_drawFrame(){this._config.frameDrawn=!0;let e=d("div",{class:"list-wraper"}),t=d("div",{class:"list"}),n=d("div",{class:"header"}),o=d("input",{class:"inp-transparent inp-title",value:this._config.title}),i=d("a",{class:"btn-more",href:"#!"}),s=d("div",{class:"items-container",style:"max-height:"+r("ic-height")+"px"}),a=d("div",{class:"input-container"}),l=d("div",{class:"txt-note-container"}),c=d("input",{class:"inp-transparent txt-note",placeholder:"＋ Add card (Enter text here)",type:"text"}),p=d("div",{class:"btn-save-container"}),h=d("a",{class:"btn btn-save"}),u=d("img",{src:"assets/floppy_disk.png",width:"20px",height:"20px"});e.node.addEventListener("dragover",e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"}),e.node.addEventListener("drop",e=>{let t=e.dataTransfer.getData("currentIdx"),n=e.dataTransfer.getData("currentParentIdx"),o=r("lists")[n].getItem(t),i=o.getConfig("text");this.saveNote(i),o.dispose()}),i.node.addEventListener("click",()=>{this.dispose()}),h.node.addEventListener("click",()=>{""!==c.node.value&&this.saveNote(c.node.value),c.node.value=""}),o.node.addEventListener("keyup",()=>{this._config.title=o.node.value}),c.node.addEventListener("keyup",e=>{13===e.keyCode&&""!==c.node.value&&(this.saveNote(c.node.value),c.node.value="")}),n.node.appendChild(o.node),n.node.appendChild(i.node),t.node.appendChild(n.node),t.node.appendChild(s.node),l.node.appendChild(c.node),a.node.appendChild(l.node),h.node.appendChild(u.node),p.node.appendChild(h.node),a.node.appendChild(p.node),t.node.appendChild(a.node),e.node.appendChild(t.node),this._config.parent.insertBefore(e.node,this._config.beforeElem),this._components["root-wraper"]=e,this._components.root=t,this._components["inp-title"]=o,this._components["items-container"]=s,this._components["inp-add-card"]=c}saveNote(e){let t=new l({text:e});t.onDrawComplete(()=>{this.addItem(t),this._components["items-container"].node.scrollTop=this._components["items-container"].node.scrollHeight})}addItem(e){this._components["items-container"].node.appendChild(e.getNode()),e.setIdx(this._listItems.push(e)-1),e.setParentComponent(this)}getItem(e){return this._listItems[e]}_draw(){super._draw(),this._components["inp-title"].node.value=this._config.title,this._fireDrawComplete()}serialize(){return{title:this._config.title,items:this._listItems.filter(e=>!e._disposed).map(e=>e.serialize())}}}const p=o.getElementById("app"),h=o.getElementById("add-new-list"),u=o.getElementById("btn-add-list"),f=o.getElementById("btn-reset");let m=[],g=!1;s("lists",m),u.addEventListener("click",()=>{p.setAttribute("style","width:"+284*(m.length+2)+"px"),0===m.length&&(u.textContent="＋ Add Another list");let e=new c(p,h);e.setIdx(m.push(e)-1)}),window.addEventListener("DOMContentLoaded",(function(){let e,t=function(){let e=window.localStorage.getItem("dumpedData");return e&&JSON.parse(e)}();if(s("ic-height",.7*window.innerHeight),t)for(let n=0,o=t.length;n<o;n++){e=new c(p,h,{title:t[n].title});for(let o=0,i=t[n].items.length;o<i;o++)e.saveNote(t[n].items[o].text);e.setIdx(m.push(e)-1)}p.setAttribute("style","width:"+284*(m.length+1)+"px")})),window.addEventListener("beforeunload",(function(){g||function(){let e=r("lists");e&&window.localStorage.setItem("dumpedData",JSON.stringify(e.filter(e=>!e._disposed).map(e=>e.serialize())))}()})),f.addEventListener("click",(function(){g=!0,window.localStorage.removeItem("dumpedData"),window.location.reload()}))}]);