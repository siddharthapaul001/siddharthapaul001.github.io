<!DOCTYPE html>
<html>
    <head>
        <title>My page</title>
    </head>
    <body>
        <div id="abc">ABC</div>
        <div id="xyz">XYZ</div>
        <button id="btn-red" onclick="makeRed()">Make ABC Red</button>
        <button id="btn-red-reset" onclick="resetRed()">Reset ABC</button>
        <button id="btn-green" onclick="makeGreen()">Make XYZ Green</button>
        <button id="btn-green-reset" onclick="resetGreen()">Reset XYZ</button>
        <script>

            function findRule(styleSheet, selector){
                for(let i in styleSheet.rules){
                    if(styleSheet.rules[i] && styleSheet.rules[i].selectorText == selector.trim()){
                        return i;
                    }
                }
                return -1;
            }

            function createStyle(){
                let styleElem = document.createElement("style");
                document.getElementsByTagName("head")[0].appendChild(styleElem);
                return document.styleSheets[0];
            }
            function getStyle(){
                return document.styleSheets.length ? document.styleSheets[0] : createStyle();
            }

            function makeRed(){
                let styleSheet = getStyle();
                if(findRule(styleSheet, "#abc") == -1){
                    styleSheet.insertRule("#abc{background-color: #f00}", styleSheet.rules.length);
                }
            }
            
            function resetRed(){
                let styleSheet = getStyle();
                if(findRule(styleSheet, "#abc") > -1){
                    styleSheet.deleteRule(findRule(styleSheet, "#abc"));
                }
            }


            function makeGreen(){
                let styleSheet = getStyle();
                if(findRule(styleSheet, "#xyz") == -1){
                    styleSheet.insertRule("#xyz{background-color: #0f0}", styleSheet.rules.length);
                }
            }
            function resetGreen(){
                let styleSheet = getStyle();
                if(findRule(styleSheet, "#xyz") > -1){
                    styleSheet.deleteRule(findRule(styleSheet, "#xyz"));
                }
            }
        </script>
    </body>
</html>